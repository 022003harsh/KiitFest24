generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id                  String    @id @default(uuid())
  name                String
  kiitEmail           String    @unique
  personalEmail       String    @unique
  phoneNumber         String?
  password            String
  DateOfBirth         DateTime
  city                String
  state               String
  gender              String
  college             String
  events              Event[]   @relation("Participants")
  accomodation        Boolean
  payment             Boolean
  qr_code             String    @unique
  amount_paid         Boolean
  createdAt           DateTime  @default(now())
  issues              Issue[]   @relation("UserIssues")
  carts               Cart[]    @relation("UserCarts")
  qrParticipantEvents Event[]   @relation("QRParticipants")  
}

model Event {
  event_id           String    @id @default(uuid())
  name               String    @unique
  participants       User[]    @relation("Participants")
  qr_participants    User[]    @relation("QRParticipants")
  carts              Cart[]    @relation("CartEvents")  
}

model Issue {
  issue_id           String    @id @default(uuid())
  user               User      @relation("UserIssues", fields: [userId], references: [id])
  userId             String
  issue              String
  createdAt          DateTime  @default(now())
  resolved           Boolean
}

model Cart {
  cart_id            String    @id @unique
  user               User      @relation("UserCarts", fields: [userId], references: [id])
  userId             String
  user_name          String
  events             Event[]   @relation("CartEvents")
  merchandise        Boolean
  accomodation_price Int
  final_Amount       Int
}